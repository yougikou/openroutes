# OpenRoutes - 分散型アウトドアログ 🌲🚵‍♂️

自然を探索し、足跡を記録する。完全無料で、データはあなたの手に。

[![日本語](https://img.shields.io/badge/lang-日本語-green.svg)](./README_JP.md)
[![English](https://img.shields.io/badge/lang-English-blue.svg)](./README_EN.md)
[![中文](https://img.shields.io/badge/lang-中文-red.svg)](./README.md)

[🌐 デモサイトを見る](https://yougikou.github.io/openroutes/)

## 🌟 OpenRoutes とは？

OpenRoutes は、React Native (Expo) で構築された **サーバーレス (Serverless)** のアウトドア・ルート共有プラットフォームです。

他のプラットフォームと異なり、**GitHub をデータベースとして使用します**。つまり：
- **完全無料**：サブスクリプション費用も、広告もありません。
- **データの自律性**：ルートデータは閉鎖的なプライベートサーバーではなく、公開された GitHub リポジトリに保存されます。
- **コミュニティ主導**：各 Issue がルートであり、各 Comment が交流です。

## 📖 ユーザーガイド：使い方

分散型のアウトドアの旅を始めるための簡単な3ステップ。

### 1. GitHub アカウントを接続する 🔗
画面下部の **設定** タブをタップし、**接続** をタップしてログインします。
- **なぜログインが必要ですか？** 悪用を防ぎ、API制限を回避するために、身元確認が必要です。
- **権限の説明**：ルートの投稿やコメントができるように、Issue の読み書き権限が必要です。

### 2. ルートを探す (Explore) 🗺️
ホーム画面で、コミュニティが共有したハイキングやサイクリングのルートを閲覧できます。
- **マップモード**：リスト内のルートをタップすると、詳細な地図ページに入ります。
- **データのダウンロード**：**GPX** または **KML** ファイルのエクスポートに対応しており、時計や GPS デバイスにインポートできます。

### 3. 足跡を共有する (Share) 📝
画面下部の **Share** (共有) タブをタップして、記録をアップロードします。
- **ファイルのアップロード**：`.gpx` または `.kml` ファイルを選択します。
- **自動解析**：システムが距離、上昇量、所要時間を自動的に計算します。
- **写真の追加**：途中の風景写真をアップロードします（現在は Imgur 画像ホスティングに対応）。
- **公開**：送信ボタンをタップすると、あなたのルートが自動的に GitHub Issue として生成されます！

---

## 🔒 データはどのように保存されますか？

OpenRoutes は独自の **Git-as-Backend** アーキテクチャを採用しています：

1.  **ルートメタデータ (Metadata)**：タイトル、説明、難易度などの情報は、**GitHub Issue** の本文に (YAML 形式で) 保存されます。
2.  **ルートファイル (GeoJSON)**：変換されたルートデータは、**GitHub Releases** (タグ: `inbox`) に保存され、永続化されます。
3.  **画像 (Images)**：現在は **Imgur API** でホストされています (将来的には GitHub ストレージへの移行を計画中)。

---

## 🛠️ デプロイと開発ガイド

開発者の方、または独自の OpenRoutes インスタンスをデプロイしたい方は、以下の手順を参考にしてください。

### 前提条件
-   Node.js (v22+ 推奨)
-   npm

### インストール
```bash
npm install
```

### 環境設定

#### ローカル開発 (`.env`)
プロジェクトルートに `.env` ファイルを作成し、データソースリポジトリを設定します：

```ini
# データソースとなる GitHub リポジトリの所有者 (例: yougikou)
EXPO_PUBLIC_GITHUB_OWNER=your_github_username
# データソースとなる GitHub リポジトリ名 (例: openroutes-data)
EXPO_PUBLIC_GITHUB_REPO=your_repo_name
```

#### GitHub Actions Secrets (CI/CD 用)
GitHub Actions で自動ビルドを行う場合、リポジトリ設定で Secrets を追加する必要があります：

- `EXPO_PUBLIC_GITHUB_OWNER`: データソースのユーザー名
- `EXPO_PUBLIC_GITHUB_REPO`: データソースのリポジトリ名
- `ACCESS_TOKEN`: (オプション) データソースがプライベートリポジトリや別リポジトリにある場合、読み書き権限を持つ PAT が必要です。

### プロジェクトの実行
```bash
# Web 版を起動
npm run web

# iOS / Android を起動 (Expo Go が必要)
npm run ios
npm run android
```

---

## 🚀 ロードマップ (Roadmap)

私たちは、最も純粋なアウトドアコミュニティを作ることに尽力しています。以下は開発ロードマップです：

### ✅ 第1フェーズ：コア機能 (完了)
- [x] **GitHub ログインと認証**：安全な OAuth フロー。
- [x] **GPX/KML 解析**：フロントエンドでの距離と時間の自動計算。
- [x] **地図の可視化**：Leaflet ベースのインタラクティブマップ。
- [x] **Issue CMS**：GitHub Issue を利用したコンテンツ管理。
- [x] **PWA サポート**：スマホのホーム画面にインストールでき、基本機能をオフラインで利用可能。

### 🚧 第2フェーズ：体験の向上 (進行中)
- [ ] **画像ストレージの移行**：Imgur への依存を排除し、画像を直接 GitHub Issue の添付ファイルや Releases に保存することで、100% のデータ分散化を実現。
- [ ] **オフラインマップの最適化**：PWA キャッシュ戦略を改善し、読み込み済みの地図エリアをオフラインで閲覧可能に。
- [ ] **ダークモード**：夜間の使用に適した UI テーマへの対応。

### 🔮 第3フェーズ：エコシステムの拡張 (将来)
- [ ] **マルチリポジトリ対応**：ユーザーが設定でデータソースを切り替えられるようにします（例：「自分のプライベートリポジトリを見る」vs「コミュニティの厳選を見る」）。
- [ ] **ソーシャル機能**：アプリ内で Issue コメントを直接レンダリングし、「いいね」や議論をサポート。
- [ ] **イベントの組織**：Issue ベースのイベント申し込み機能。

---

### ❤️ 開発の初志
大自然はすべての人のものです。私たちは、質の高いアウトルート情報が有料の壁によって遮られるべきではないと信じています。OpenRoutes は、ハイキング、サイクリング、探検を愛するすべての友人のために作られました。情報を自由に流し、足跡を山川に広げましょう。
